# ============================================================================
# FKS LLM Audit Configuration
# ============================================================================
# Configuration for LLM-powered audits supporting multiple providers:
# - xAI (Grok 4.1) - Default, good balance of speed and capability
# - Anthropic (Claude Opus 4.5) - Best for deep analysis and whitepaper conformity
# - Google (Gemini) - Alternative option
#
# Budget: $20 USD / month (default)
# Default Provider: xAI (Grok 4.1)
#
# For JANUS whitepaper conformity audits, use Claude Opus 4.5:
#   audit-cli janus-audit --provider opus
# ============================================================================

# Master switch - set to true to enable LLM audits
enabled = true

# ============================================================================
# File Selection Settings
# ============================================================================
[file_selection]
# Maximum number of files to analyze per run
max_files_per_run = 100

# Minimum importance score (0-100) - files below this are skipped
min_importance_score = 40.0

# Minimum risk score (0-100) - files below this are skipped
min_risk_score = 30.0

# Only analyze files changed in last N commits (null = analyze all)
# changed_in_last_n_commits = 10

# Skip files larger than this (bytes) - 150KB default
max_file_size_bytes = 150000

# Exclude patterns (glob)
exclude_patterns = [
    "**/target/**",
    "**/node_modules/**",
    "**/build/**",
    "**/dist/**",
    "**/.git/**",
    "**/vendor/**",
    "**/*.min.js",
    "**/*.min.css",
    "**/package-lock.json",
    "**/Cargo.lock",
]

# Include patterns (glob) - only these file types are analyzed
include_patterns = [
    "**/*.rs",
    "**/*.kt",
    "**/*.kts",
    "**/*.py",
    "**/*.ts",
    "**/*.tsx",
    "**/*.js",
    "**/*.jsx",
]

# Priority extensions - these are analyzed first
priority_extensions = ["rs", "kt", "py", "ts"]

# ============================================================================
# Provider Settings
# ============================================================================
[provider]
# Default provider: "xai", "google", or "anthropic"
# - xai: Grok 4.1 (fast, cost-effective, good for routine audits)
# - anthropic: Claude Opus 4.5 (best for deep analysis, whitepaper conformity)
# - google: Gemini 1.5 Pro (alternative option)
default_provider = "xai"

# Default model for the selected provider
# xAI models: grok-4-1-fast-reasoning, grok-4-1-fast
# Anthropic models: claude-opus-4-20250514, claude-sonnet-4-20250514, claude-3-5-haiku-20241022
# Google models: gemini-1.5-pro
default_model = "grok-4-1-fast-reasoning"

# API key (prefer environment variables instead):
#   XAI_API_KEY - for xAI/Grok
#   ANTHROPIC_API_KEY - for Anthropic/Claude
#   GOOGLE_API_KEY - for Google/Gemini
# api_key = ""

# Max tokens per request
max_tokens = 16000

# Temperature (0.0 - 1.0, lower = more focused)
temperature = 0.2

# ============================================================================
# Cost and Quota Limits
# ============================================================================
[limits]
# Maximum API calls per day
max_daily_calls = 200

# Monthly budget in USD - $20 limit
max_monthly_cost_usd = 20.0

# Maximum tokens per day (2M)
max_daily_tokens = 2000000

# Maximum tokens per month (~40M at $20 budget for Grok)
max_monthly_tokens = 40000000

# Warn when usage reaches this percentage of limits
warn_threshold_pct = 80.0

# Grok 4.1 Fast pricing (USD per 1M tokens) - as of Jan 2025
cost_per_1m_input_tokens = 0.30
cost_per_1m_output_tokens = 0.50

# Claude Opus 4.5 pricing (USD per 1M tokens) - premium model for deep analysis
# Use for JANUS whitepaper conformity audits
anthropic_cost_per_1m_input_tokens = 15.0
anthropic_cost_per_1m_output_tokens = 75.0

# Retry settings for API failures
max_retries = 3
retry_delay_ms = 1000
exponential_backoff = true

# ============================================================================
# Cache Settings
# ============================================================================
[cache]
# Enable caching of analysis results
enabled = true

# Auto-prune cache entries older than N days
auto_prune_days = 30

# Maximum cache size in MB
max_size_mb = 100

# ============================================================================
# JANUS Whitepaper Conformity Audit (Claude Opus 4.5)
# ============================================================================
# For deep analysis of JANUS neuromorphic trading system implementation
# against the technical whitepaper, use Claude Opus 4.5:
#
#   audit-cli janus-audit --provider opus
#
# Available focus areas:
#   - all: Full whitepaper conformity check
#   - neuromorphic: Brain-region component mappings
#   - gaf: GAF transformation mathematics
#   - ltn: ≈Åukasiewicz logic implementation
#   - memory: Memory hierarchy (hippocampus, SWR, neocortex)
#   - compliance: Regulatory compliance (wash sale, position limits)
#
# Options:
#   --verify-math: Deep mathematical verification
#   --verify-mappings: Brain-region to code component verification
#   --compliance-report: Generate regulatory compliance report
#   --sections "3.1,4.2": Check specific whitepaper sections
#
# Note: Claude Opus 4.5 is significantly more expensive than Grok 4.1
# but provides superior reasoning for complex conformity checks.
